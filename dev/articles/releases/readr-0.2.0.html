<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>readr 0.2.0 • readr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="../../tidyverse.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../../bootstrap-toc.css">
<script src="../../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../pkgdown.js"></script><link href="../../tidyverse-2.css" rel="stylesheet">
<!--optional theme--><link href="../../.css" rel="stylesheet">
<meta property="og:title" content="readr 0.2.0">
<meta property="og:description" content="readr">
<meta property="og:image" content="https://readr.tidyverse.org/logo.png">
<meta name="twitter:card" content="summary">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115082821-1');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../../index.html">readr</a>
        <div class="info hidden-xs hidden-sm">
          <span class="partof">part of the <a href="https://tidyverse.org">tidyverse</a></span>
          <span class="version version-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">2.1.0.9000</span>
        </div>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
<li>
  <a href="../../index.html">Home</a>
</li>
<li>
  <a href="../../articles/readr.html">Overview</a>
</li>
<li>
  <a href="../../articles/locales.html">Locales</a>
</li>
<li>
  <a href="../../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="dropdown-header">Release notes</li>
    <li>
      <a href="https://www.tidyverse.org/blog/2021/11/readr-2-1-0-lazy/">Version 2.1.0</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/blog/2021/07/readr-2-0-0/">Version 2.0.0</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/blog/2020/10/readr-1-4-0/">Version 1.4.0</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/blog/2018/12/readr-1-3-1/">Version 1.3.1</a>
    </li>
    <li>
      <a href="../../articles/releases/readr-1.0.0.html">Version 1.0.0</a>
    </li>
    <li>
      <a href="../../articles/releases/readr-0.2.0.html">Version 0.2.0</a>
    </li>
    <li>
      <a href="../../articles/releases/readr-0.1.0.html">Version 0.1.0</a>
    </li>
    <li class="divider">
    <li>
      <a href="../../news/index.html">Change log</a>
    </li>
  </ul>
</li>
        <li>
  <a href="https://github.com/tidyverse/readr/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="readr-0.2.0_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>readr 0.2.0</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/tidyverse/readr/blob/master/vignettes/releases/readr-0.2.0.Rmd"><code>vignettes/releases/readr-0.2.0.Rmd</code></a></small>
      <div class="hidden name"><code>readr-0.2.0.Rmd</code></div>

    </div>

    
    
<p>readr 0.2.0 is now available on CRAN. readr makes it easy to read many types of tabular data, including csv, tsv and fixed width. Compared to base equivalents like <code><a href="https://rdrr.io/r/utils/read.table.html">read.csv()</a></code>, readr is much faster and gives more convenient output: it never converts strings to factors, can parse date/times, and it doesn’t munge the column names.</p>
<p>This is a big release, so below I describe the new features divided into four main categories:</p>
<ul>
<li>Improved support for international data.</li>
<li>Column parsing improvements.</li>
<li>File parsing improvements, including support for comments.</li>
<li>Improved writers.</li>
</ul>
<p>There were too many minor improvements and bug fixes to describe in detail here. See the <a href="https://github.com/hadley/readr/releases/tag/v0.2.0">release notes</a> for a complete list.</p>
<div id="internationalisation" class="section level2">
<h2 class="hasAnchor">
<a href="#internationalisation" class="anchor"></a>Internationalisation</h2>
<p>readr now has a strategy for dealing with settings that vary across languages and localities: <strong>locales</strong>. A locale, created with <code><a href="../../reference/locale.html">locale()</a></code>, includes:</p>
<ul>
<li>The names of months and days, used when parsing dates.</li>
<li>The default time zone, used when parsing datetimes.</li>
<li>The character encoding, used when reading non-ASCII strings.</li>
<li>Default date format, used when guessing column types.</li>
<li>The decimal and grouping marks, used when reading numbers.</li>
</ul>
<p>I’ll cover the most important of these parameters below. For more details, see <code><a href="../../articles/locales.html">vignette("locales")</a></code>.</p>
<p>To override the default US-centric locale, you pass a custom locale to <code><a href="../../reference/read_delim.html">read_csv()</a></code>, <code><a href="../../reference/read_delim.html">read_tsv()</a></code>, or <code><a href="../../reference/read_fwf.html">read_fwf()</a></code>. Rather than showing those functions here, I’ll use the <code>parse_*()</code> functions because they work with character vectors instead of a files, but are otherwise identical.</p>
<div id="names-of-months-and-days" class="section level3">
<h3 class="hasAnchor">
<a href="#names-of-months-and-days" class="anchor"></a>Names of months and days</h3>
<p>The first argument to <code><a href="../../reference/locale.html">locale()</a></code> is <code>date_names</code> which controls what values are used for month and day names. The easiest way to specify them is with a ISO 639 language code:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../../reference/locale.html">locale</a></span><span class="op">(</span><span class="st">"ko"</span><span class="op">)</span> <span class="co"># Korean</span>
<span class="co">#&gt; &lt;locale&gt;</span>
<span class="co">#&gt; Numbers:  123,456.78</span>
<span class="co">#&gt; Formats:  %AD / %AT</span>
<span class="co">#&gt; Timezone: UTC</span>
<span class="co">#&gt; Encoding: UTF-8</span>
<span class="co">#&gt; &lt;date_names&gt;</span>
<span class="co">#&gt; Days:   일요일 (일), 월요일 (월), 화요일 (화), 수요일 (수), 목요일 (목), 금요일</span>
<span class="co">#&gt;         (금), 토요일 (토)</span>
<span class="co">#&gt; Months: 1월, 2월, 3월, 4월, 5월, 6월, 7월, 8월, 9월, 10월, 11월, 12월</span>
<span class="co">#&gt; AM/PM:  오전/오후</span>
<span class="fu"><a href="../../reference/locale.html">locale</a></span><span class="op">(</span><span class="st">"fr"</span><span class="op">)</span> <span class="co"># French</span>
<span class="co">#&gt; &lt;locale&gt;</span>
<span class="co">#&gt; Numbers:  123,456.78</span>
<span class="co">#&gt; Formats:  %AD / %AT</span>
<span class="co">#&gt; Timezone: UTC</span>
<span class="co">#&gt; Encoding: UTF-8</span>
<span class="co">#&gt; &lt;date_names&gt;</span>
<span class="co">#&gt; Days:   dimanche (dim.), lundi (lun.), mardi (mar.), mercredi (mer.), jeudi</span>
<span class="co">#&gt;         (jeu.), vendredi (ven.), samedi (sam.)</span>
<span class="co">#&gt; Months: janvier (janv.), février (févr.), mars (mars), avril (avr.), mai (mai),</span>
<span class="co">#&gt;         juin (juin), juillet (juil.), août (août), septembre (sept.),</span>
<span class="co">#&gt;         octobre (oct.), novembre (nov.), décembre (déc.)</span>
<span class="co">#&gt; AM/PM:  AM/PM</span></code></pre></div>
<p>This allows you to parse dates in other languages:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../../reference/parse_datetime.html">parse_date</a></span><span class="op">(</span><span class="st">"1 janvier 2015"</span>, <span class="st">"%d %B %Y"</span>, locale <span class="op">=</span> <span class="fu"><a href="../../reference/locale.html">locale</a></span><span class="op">(</span><span class="st">"fr"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] "2015-01-01"</span>
<span class="fu"><a href="../../reference/parse_datetime.html">parse_date</a></span><span class="op">(</span><span class="st">"14 oct. 1979"</span>, <span class="st">"%d %b %Y"</span>, locale <span class="op">=</span> <span class="fu"><a href="../../reference/locale.html">locale</a></span><span class="op">(</span><span class="st">"fr"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] "1979-10-14"</span></code></pre></div>
</div>
<div id="timezones" class="section level3">
<h3 class="hasAnchor">
<a href="#timezones" class="anchor"></a>Timezones</h3>
<p>readr assumes that times are in <a href="https://en.wikipedia.org/wiki/Coordinated_Universal_Time">Coordinated Universal Time</a>, aka UTC. UTC is the best timezone for data because it doesn’t have daylight savings. If your data isn’t already in UTC, you’ll need to supply a <code>tz</code> in the locale:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../../reference/parse_datetime.html">parse_datetime</a></span><span class="op">(</span><span class="st">"2001-10-10 20:10"</span><span class="op">)</span>
<span class="co">#&gt; [1] "2001-10-10 20:10:00 UTC"</span>
<span class="fu"><a href="../../reference/parse_datetime.html">parse_datetime</a></span><span class="op">(</span><span class="st">"2001-10-10 20:10"</span>, 
  locale <span class="op">=</span> <span class="fu"><a href="../../reference/locale.html">locale</a></span><span class="op">(</span>tz <span class="op">=</span> <span class="st">"Pacific/Auckland"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] "2001-10-10 20:10:00 NZDT"</span>
<span class="fu"><a href="../../reference/parse_datetime.html">parse_datetime</a></span><span class="op">(</span><span class="st">"2001-10-10 20:10"</span>, 
  locale <span class="op">=</span> <span class="fu"><a href="../../reference/locale.html">locale</a></span><span class="op">(</span>tz <span class="op">=</span> <span class="st">"Europe/Dublin"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] "2001-10-10 20:10:00 IST"</span></code></pre></div>
<p>List all available times zones with <code><a href="https://rdrr.io/r/base/timezones.html">OlsonNames()</a></code>. If you’re American, note that “EST” is not Eastern Standard Time – it’s a Canadian time zone that doesn’t have DST! Instead of relying on ambiguous abbreviations, use:</p>
<ul>
<li>PST/PDT = “US/Pacific”</li>
<li>CST/CDT = “US/Central”</li>
<li>MST/MDT = “US/Mountain”</li>
<li>EST/EDT = “US/Eastern”</li>
</ul>
</div>
<div id="default-formats" class="section level3">
<h3 class="hasAnchor">
<a href="#default-formats" class="anchor"></a>Default formats</h3>
<p>Locales also provide default date and time formats. The time format isn’t currently used for anything, but the date format is used when guessing column types. The default date format is <code>%Y-%m-%d</code> because that’s unambiguous:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="fu"><a href="../../reference/parse_guess.html">parse_guess</a></span><span class="op">(</span><span class="st">"2010-10-10"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;  Date[1:1], format: "2010-10-10"</span></code></pre></div>
<p>If you’re an American, you might want you use your illogical date system::</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="fu"><a href="../../reference/parse_guess.html">parse_guess</a></span><span class="op">(</span><span class="st">"01/02/2013"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;  chr "01/02/2013"</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="fu"><a href="../../reference/parse_guess.html">parse_guess</a></span><span class="op">(</span><span class="st">"01/02/2013"</span>, 
  locale <span class="op">=</span> <span class="fu"><a href="../../reference/locale.html">locale</a></span><span class="op">(</span>date_format <span class="op">=</span> <span class="st">"%d/%m/%Y"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;  Date[1:1], format: "2013-02-01"</span></code></pre></div>
</div>
<div id="character-encoding" class="section level3">
<h3 class="hasAnchor">
<a href="#character-encoding" class="anchor"></a>Character encoding</h3>
<p>All readr functions yield strings encoded in UTF-8. This encoding is the most likely to give good results in the widest variety of settings. By default, readr assumes that your input is also in UTF-8, which is less likely to be the case, especially when you’re working with older datasets. To parse a dataset that’s not in UTF-8, you need to a supply an <code>encoding</code>.</p>
<p>The following code creates a string encoded with latin1 (aka ISO-8859-1), and shows how it’s different from the string encoded as UTF-8, and how to parse it with readr:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="st">"Émigré cause célèbre déjà vu.\n"</span>
<span class="va">y</span> <span class="op">&lt;-</span> <span class="fu">stringi</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/stringi/man/stri_encode.html">stri_conv</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"UTF-8"</span>, <span class="st">"Latin1"</span><span class="op">)</span>

<span class="co"># These strings look like they're identical:</span>
<span class="va">x</span>
<span class="co">#&gt; [1] "Émigré cause célèbre déjà vu.\n"</span>
<span class="va">y</span>
<span class="co">#&gt; [1] "Émigré cause célèbre déjà vu.\n"</span>
<span class="fu"><a href="https://rdrr.io/r/base/identical.html">identical</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span>
<span class="co">#&gt; [1] TRUE</span>

<span class="co"># But they have different encodings:</span>
<span class="fu"><a href="https://rdrr.io/r/base/Encoding.html">Encoding</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>
<span class="co">#&gt; [1] "UTF-8"</span>
<span class="fu"><a href="https://rdrr.io/r/base/Encoding.html">Encoding</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span>
<span class="co">#&gt; [1] "latin1"</span>

<span class="co"># That means while they print the same, their raw (binary)</span>
<span class="co"># representation is actually rather different:</span>
<span class="fu"><a href="https://rdrr.io/r/base/rawConversion.html">charToRaw</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>
<span class="co">#&gt;  [1] c3 89 6d 69 67 72 c3 a9 20 63 61 75 73 65 20 63 c3 a9 6c c3 a8 62 72 65 20</span>
<span class="co">#&gt; [26] 64 c3 a9 6a c3 a0 20 76 75 2e 0a</span>
<span class="fu"><a href="https://rdrr.io/r/base/rawConversion.html">charToRaw</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span>
<span class="co">#&gt;  [1] c9 6d 69 67 72 e9 20 63 61 75 73 65 20 63 e9 6c e8 62 72 65 20 64 e9 6a e0</span>
<span class="co">#&gt; [26] 20 76 75 2e 0a</span>

<span class="co"># readr expects strings to be encoded as UTF-8. If they're</span>
<span class="co"># not, you'll get weird characters</span>
<span class="fu"><a href="../../reference/parse_atomic.html">parse_character</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>
<span class="co">#&gt; [1] "Émigré cause célèbre déjà vu.\n"</span>
<span class="fu"><a href="../../reference/parse_atomic.html">parse_character</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span>
<span class="co">#&gt; [1] "\xc9migr\xe9 cause c\xe9l\xe8bre d\xe9j\xe0 vu.\n"</span>

<span class="co"># If you know the encoding, supply it:</span>
<span class="fu"><a href="../../reference/parse_atomic.html">parse_character</a></span><span class="op">(</span><span class="va">y</span>, locale <span class="op">=</span> <span class="fu"><a href="../../reference/locale.html">locale</a></span><span class="op">(</span>encoding <span class="op">=</span> <span class="st">"latin1"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] "Émigré cause célèbre déjà vu.\n"</span></code></pre></div>
<p>If you don’t know what encoding the file uses, try <code><a href="../../reference/guess_encoding.html">guess_encoding()</a></code>. It’s not 100% perfect (as it’s fundamentally a heuristic), but should at least get you pointed in the right direction:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../../reference/guess_encoding.html">guess_encoding</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 2 × 2</span>
<span class="co">#&gt;   encoding   confidence</span>
<span class="co">#&gt;   &lt;chr&gt;           &lt;dbl&gt;</span>
<span class="co">#&gt; 1 ISO-8859-2        0.4</span>
<span class="co">#&gt; 2 ISO-8859-1        0.3</span>

<span class="co"># Note that the first guess produces a valid string, </span>
<span class="co"># but isn't correct:</span>
<span class="fu"><a href="../../reference/parse_atomic.html">parse_character</a></span><span class="op">(</span><span class="va">y</span>, locale <span class="op">=</span> <span class="fu"><a href="../../reference/locale.html">locale</a></span><span class="op">(</span>encoding <span class="op">=</span> <span class="st">"ISO-8859-2"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] "Émigré cause célčbre déjŕ vu.\n"</span>
<span class="co"># But ISO-8859-1 is another name for latin1</span>
<span class="fu"><a href="../../reference/parse_atomic.html">parse_character</a></span><span class="op">(</span><span class="va">y</span>, locale <span class="op">=</span> <span class="fu"><a href="../../reference/locale.html">locale</a></span><span class="op">(</span>encoding <span class="op">=</span> <span class="st">"ISO-8859-1"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] "Émigré cause célèbre déjà vu.\n"</span></code></pre></div>
</div>
<div id="numbers" class="section level3">
<h3 class="hasAnchor">
<a href="#numbers" class="anchor"></a>Numbers</h3>
<p>Some countries use the decimal point, while others use the decimal comma. The <code>decimal_mark</code> option controls which readr uses when parsing doubles:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../../reference/parse_atomic.html">parse_double</a></span><span class="op">(</span><span class="st">"1,23"</span>, locale <span class="op">=</span> <span class="fu"><a href="../../reference/locale.html">locale</a></span><span class="op">(</span>decimal_mark <span class="op">=</span> <span class="st">","</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] 1.23</span></code></pre></div>
<p>The <code>big_mark</code> option describes which character is used to space groups of digits. Do you write <code>1,000,000</code>, <code>1.000.000</code>, <code>1 000 000</code>, or <code>1'000'000</code>? Specifying the grouping mark allows <code><a href="../../reference/parse_number.html">parse_number()</a></code> to parse large number as they’re commonly written:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../../reference/parse_number.html">parse_number</a></span><span class="op">(</span><span class="st">"1,234.56"</span><span class="op">)</span>
<span class="co">#&gt; [1] 1234.56</span>

<span class="co"># dplyr is smart enough to guess that if you're using , for </span>
<span class="co"># decimals then you're probably using . for grouping:</span>
<span class="fu"><a href="../../reference/parse_number.html">parse_number</a></span><span class="op">(</span><span class="st">"1.234,56"</span>, locale <span class="op">=</span> <span class="fu"><a href="../../reference/locale.html">locale</a></span><span class="op">(</span>decimal_mark <span class="op">=</span> <span class="st">","</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] 1234.56</span></code></pre></div>
</div>
</div>
<div id="column-parsing-improvements" class="section level2">
<h2 class="hasAnchor">
<a href="#column-parsing-improvements" class="anchor"></a>Column parsing improvements</h2>
<p>One of the most useful parts of readr are the column parsers: the tools that turns character input into usefully typed data frame columns. This process is now described more fully in a new vignette: <code>vignette("column-types")</code>.</p>
<p>By default, column types are guessed by looking at the data. I’ve made a number of tweaks to make it more likely that your code will load correctly the first time:</p>
<ul>
<li><p>readr now looks at the first 1000 rows (instead of just the first 100) when guessing column types: this only takes a fraction more time, but should hopefully yield better guesses for more inputs.</p></li>
<li><p><code><a href="../../reference/parse_datetime.html">col_date()</a></code> and <code><a href="../../reference/parse_datetime.html">col_datetime()</a></code> no longer recognise partial dates like 19, 1900, 1900-01. These triggered many false positives and after re-reading the ISO8601 spec, I believe they actually refer to periods of time, so should not be parsed into a specific instant.</p></li>
<li><p><code><a href="../../reference/parse_atomic.html">col_integer()</a></code> no longer recognises values started with zeros (e.g. 0001) as these are often used as identifiers.</p></li>
<li><p><code><a href="../../reference/parse_number.html">col_number()</a></code> will automatically recognise numbers containing the grouping mark (see below for more details).</p></li>
</ul>
<p>But you can override these defaults with the <code>col_types()</code> argument. In this version, <code>col_types</code> gains some much needed flexibility:</p>
<ul>
<li>
<p>New <code><a href="../../reference/cols.html">cols()</a></code> function takes of assembling the list of column types, and with its <code>.default</code> argument, allows you to control the default column type:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../../reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"x,y\n1,2"</span>, col_types <span class="op">=</span> <span class="fu"><a href="../../reference/cols.html">cols</a></span><span class="op">(</span>.default <span class="op">=</span> <span class="st">"c"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 1 × 2</span>
<span class="co">#&gt;   x     y    </span>
<span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt;</span>
<span class="co">#&gt; 1 1     2</span></code></pre></div>
<p>You can refer to parsers with their full name (e.g. <code><a href="../../reference/parse_atomic.html">col_character()</a></code>) or their one letter abbreviation (e.g. <code>c</code>). The default value of <code>.default</code> is “?”: guess the type of column from the data.</p>
</li>
<li>
<p><code><a href="../../reference/cols.html">cols_only()</a></code> allows you to load only the specified columns:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../../reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"a,b,c\n1,2,3"</span>, col_types <span class="op">=</span> <span class="fu"><a href="../../reference/cols.html">cols_only</a></span><span class="op">(</span><span class="st">"b"</span> <span class="op">=</span> <span class="st">"?"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 1 × 1</span>
<span class="co">#&gt;       b</span>
<span class="co">#&gt;   &lt;dbl&gt;</span>
<span class="co">#&gt; 1     2</span></code></pre></div>
</li>
</ul>
<p>Many of the individual parsers have also been improved:</p>
<ul>
<li><p><code><a href="../../reference/parse_atomic.html">col_integer()</a></code> and <code><a href="../../reference/parse_atomic.html">col_double()</a></code> no longer silently ignore trailing characters after the number.</p></li>
<li>
<p>New <code><a href="../../reference/parse_number.html">col_number()</a></code>/<code><a href="../../reference/parse_number.html">parse_number()</a></code> replace the old <code>col_numeric()</code>/ <code>parse_numeric()</code>. This parser is less flexible, so it’s less likely to silently ignored bad input. It’s designed specifically to read currencies and percentages. It only reads the first number from a string, ignoring the grouping mark defined by the locale:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../../reference/parse_number.html">parse_number</a></span><span class="op">(</span><span class="st">"1,234,566"</span><span class="op">)</span>
<span class="co">#&gt; [1] 1234566</span>
<span class="fu"><a href="../../reference/parse_number.html">parse_number</a></span><span class="op">(</span><span class="st">"$1,234"</span><span class="op">)</span>
<span class="co">#&gt; [1] 1234</span>
<span class="fu"><a href="../../reference/parse_number.html">parse_number</a></span><span class="op">(</span><span class="st">"27%"</span><span class="op">)</span>
<span class="co">#&gt; [1] 27</span></code></pre></div>
</li>
<li>
<p>New <code><a href="../../reference/parse_datetime.html">parse_time()</a></code> and <code><a href="../../reference/parse_datetime.html">col_time()</a></code> allow you to parse times. They have an optional <code>format</code> argument, that uses the same components as <code><a href="../../reference/parse_datetime.html">parse_datetime()</a></code>. If <code>format</code> is omitted, they use a flexible parser that looks for hours, then an optional colon, then minutes, then an optional colon, then optional seconds, then optional am/pm.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../../reference/parse_datetime.html">parse_time</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"1:45 PM"</span>, <span class="st">"1345"</span>, <span class="st">"13:45:00"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; Warning: 1 parsing failure.</span>
<span class="co">#&gt; row col   expected actual</span>
<span class="co">#&gt;   2  -- time like    1345</span>
<span class="co">#&gt; 13:45:00</span>
<span class="co">#&gt;       NA</span>
<span class="co">#&gt; 13:45:00</span></code></pre></div>
<p><code><a href="../../reference/parse_datetime.html">parse_time()</a></code> returns the number of seconds since midnight as an integer with class “time”. readr includes a basic print method.</p>
</li>
<li><p><code><a href="../../reference/parse_datetime.html">parse_date()</a></code>/<code><a href="../../reference/parse_datetime.html">col_date()</a></code> and <code><a href="../../reference/parse_datetime.html">parse_datetime()</a></code>/<code><a href="../../reference/parse_datetime.html">col_datetime()</a></code> gain two new format strings: “%+” skips one or more non-digits, and <code>%p</code> reads in AM/PM (and am/pm).</p></li>
</ul>
</div>
<div id="file-parsing-improvements" class="section level2">
<h2 class="hasAnchor">
<a href="#file-parsing-improvements" class="anchor"></a>File parsing improvements</h2>
<p><code><a href="../../reference/read_delim.html">read_csv()</a></code>, <code><a href="../../reference/read_delim.html">read_tsv()</a></code>, and <code><a href="../../reference/read_delim.html">read_delim()</a></code> gain extra arguments that allow you to parse more files:</p>
<ul>
<li>
<p>Multiple NA values can be specified by passing a character vector to <code>na</code>. The default has been changed to <code>na = c("", "NA")</code>.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../../reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"a,b\n.,NA\n1,3"</span>, na <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"."</span>, <span class="st">"NA"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; Rows: 2 Columns: 2</span>
<span class="co">#&gt; ── Column specification ────────────────────────────────────────────────────────</span>
<span class="co">#&gt; Delimiter: ","</span>
<span class="co">#&gt; dbl (2): a, b</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; ℹ Use `spec()` to retrieve the full column specification for this data.</span>
<span class="co">#&gt; ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</span>
<span class="co">#&gt; # A tibble: 2 × 2</span>
<span class="co">#&gt;       a     b</span>
<span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt; 1    NA    NA</span>
<span class="co">#&gt; 2     1     3</span></code></pre></div>
</li>
<li>
<p>New <code>comment</code> argument allows you to ignore all text after a string:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../../reference/read_delim.html">read_csv</a></span><span class="op">(</span>
<span class="st">"#This is a comment
#This is another comment
a,b
1,10
2,20"</span>, comment <span class="op">=</span> <span class="st">"#"</span><span class="op">)</span>
<span class="co">#&gt; Rows: 2 Columns: 2</span>
<span class="co">#&gt; ── Column specification ────────────────────────────────────────────────────────</span>
<span class="co">#&gt; Delimiter: ","</span>
<span class="co">#&gt; dbl (2): a, b</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; ℹ Use `spec()` to retrieve the full column specification for this data.</span>
<span class="co">#&gt; ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</span>
<span class="co">#&gt; # A tibble: 2 × 2</span>
<span class="co">#&gt;       a     b</span>
<span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt; 1     1    10</span>
<span class="co">#&gt; 2     2    20</span></code></pre></div>
</li>
<li>
<p><code>trim_ws</code> argument controls whether leading and trailing whitespace is removed. It defaults to <code>TRUE</code>.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../../reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"a,b\n     1,     2"</span><span class="op">)</span>
<span class="co">#&gt; Rows: 1 Columns: 2</span>
<span class="co">#&gt; ── Column specification ────────────────────────────────────────────────────────</span>
<span class="co">#&gt; Delimiter: ","</span>
<span class="co">#&gt; dbl (2): a, b</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; ℹ Use `spec()` to retrieve the full column specification for this data.</span>
<span class="co">#&gt; ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</span>
<span class="co">#&gt; # A tibble: 1 × 2</span>
<span class="co">#&gt;       a     b</span>
<span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt; 1     1     2</span>
<span class="fu"><a href="../../reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"a,b\n     1,     2"</span>, trim_ws <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="co">#&gt; Rows: 1 Columns: 2</span>
<span class="co">#&gt; ── Column specification ────────────────────────────────────────────────────────</span>
<span class="co">#&gt; Delimiter: ","</span>
<span class="co">#&gt; chr (2): a, b</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; ℹ Use `spec()` to retrieve the full column specification for this data.</span>
<span class="co">#&gt; ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</span>
<span class="co">#&gt; # A tibble: 1 × 2</span>
<span class="co">#&gt;   a        b       </span>
<span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;   </span>
<span class="co">#&gt; 1 "     1" "     2"</span></code></pre></div>
</li>
</ul>
<p>Specifying the wrong number of column names, or having rows with an unexpected number of columns, now gives a warning, rather than an error:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../../reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"a,b,c\n1,2\n1,2,3,4"</span><span class="op">)</span>
<span class="co">#&gt; Warning: One or more parsing issues, see `problems()` for details</span>
<span class="co">#&gt; Rows: 2 Columns: 3</span>
<span class="co">#&gt; ── Column specification ────────────────────────────────────────────────────────</span>
<span class="co">#&gt; Delimiter: ","</span>
<span class="co">#&gt; dbl (2): a, b</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; ℹ Use `spec()` to retrieve the full column specification for this data.</span>
<span class="co">#&gt; ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</span>
<span class="co">#&gt; # A tibble: 2 × 3</span>
<span class="co">#&gt;       a     b     c</span>
<span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt; 1     1     2    NA</span>
<span class="co">#&gt; 2     1     2    34</span></code></pre></div>
<p>Note that the warning message now also shows you the first five problems. I hope this will often allow you to iterate immediately, rather than having to look at the full <code><a href="../../reference/problems.html">problems()</a></code>.</p>
</div>
<div id="writers" class="section level2">
<h2 class="hasAnchor">
<a href="#writers" class="anchor"></a>Writers</h2>
<p>Despite the name, readr also provides some tools for writing data frames to disk. In this version there are three output functions:</p>
<ul>
<li><p><code><a href="../../reference/write_delim.html">write_csv()</a></code> and <code><a href="../../reference/write_delim.html">write_tsv()</a></code> write tab and comma delimited files, and <code><a href="../../reference/write_delim.html">write_delim()</a></code> writes with user specified delimiter.</p></li>
<li><p><code><a href="../../reference/read_rds.html">write_rds()</a></code> and <code><a href="../../reference/read_rds.html">read_rds()</a></code> wrap around <code><a href="https://rdrr.io/r/base/readRDS.html">readRDS()</a></code> and <code><a href="https://rdrr.io/r/base/readRDS.html">saveRDS()</a></code>, defaulting to no compression, because you’re usually more interested in saving time (expensive) than disk space (cheap).</p></li>
</ul>
<p>All these functions invisibly return their output so you can use them as part of a pipeline:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu">some_manipulation</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../../reference/write_delim.html">write_csv</a></span><span class="op">(</span><span class="st">"interim-a.csv"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu">some_more_manipulation</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../../reference/write_delim.html">write_csv</a></span><span class="op">(</span><span class="st">"interim-b.csv"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu">even_more_manipulation</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../../reference/write_delim.html">write_csv</a></span><span class="op">(</span><span class="st">"final.csv"</span><span class="op">)</span></code></pre></div>
<p>You can now control how missing values are written with the <code>na</code> argument, and the quoting algorithm has been further refined to only add quotes when needed: when the string contains a quote, the delimiter, a new line or the same text as missing value.</p>
<p>Output for doubles now uses the same precision as R, and POSIXt vectors are saved in a ISO8601 compatible format.</p>
<p>For testing, you can use <code><a href="../../reference/format_delim.html">format_csv()</a></code>, <code><a href="../../reference/format_delim.html">format_tsv()</a></code>, and <code><a href="../../reference/format_delim.html">format_delim()</a></code> to write csv to a string:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mtcars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fl">4</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../../reference/format_delim.html">format_csv</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; mpg,cyl,disp,hp,drat,wt,qsec,vs,am,gear,carb</span>
<span class="co">#&gt; 21,6,160,110,3.9,2.62,16.46,0,1,4,4</span>
<span class="co">#&gt; 21,6,160,110,3.9,2.875,17.02,0,1,4,4</span>
<span class="co">#&gt; 22.8,4,108,93,3.85,2.32,18.61,1,1,4,1</span>
<span class="co">#&gt; 21.4,6,258,110,3.08,3.215,19.44,1,0,3,1</span></code></pre></div>
<p>This is particularly useful for generating <a href="https://github.com/jennybc/reprex">reprexes</a>.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="tidyverse">
  <p>readr is a part of the <strong>tidyverse</strong>, an ecosystem of packages designed with common APIs and a shared philosophy. Learn more at <a href="https://tidyverse.org">tidyverse.org</a>.</p>
</div>

<div class="author">
  <p>
    Developed by <a href="http://hadley.nz">Hadley Wickham</a>, <a href="http://jimhester.com">Jim Hester</a>, Jennifer Bryan, <a href="https://www.rstudio.com"><img src="https://www.tidyverse.org/rstudio-logo.svg" alt="RStudio" height="24"></a>.
    Site built by <a href="https://pkgdown.r-lib.org">pkgdown</a>.
  </p>
</div>

      </footer>
</div>

  


  </body>
</html>
